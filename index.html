<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mekhava Expert Farmer</title>
    <style>
        /* --- CSS STYLING --- */
        :root {
            --neon-green: #39ff14;
            --neon-red: #ff073a;
            --neon-blue: #04d9ff;
            --neon-yellow: #ffeb3b;
            --neon-orange: #ff9e00;
            --dark-bg: #121212;
            --panel-bg: #1e1e1e;
        }

        body {
            font-family: 'Segoe UI', 'Nirmala UI', sans-serif;
            background-color: var(--dark-bg);
            color: white;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 {
            text-align: center;
            background: linear-gradient(90deg, var(--neon-green), var(--neon-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
        }

        .subtitle { text-align: center; color: #ccc; margin-bottom: 20px; }

        .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            max-width: 1100px;
            width: 100%;
        }

        .panel {
            background: var(--panel-bg);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            border: 1px solid #333;
        }

        h3 { color: var(--neon-yellow); border-bottom: 1px solid #444; padding-bottom: 10px; margin-top: 0; }

        label { display: block; margin-top: 15px; font-weight: bold; color: #ddd; }
        select, button, input {
            width: 100%; padding: 12px; margin-top: 5px; border-radius: 8px; border: none;
            background: #333; color: white; font-size: 16px; box-sizing: border-box;
        }

        /* Animated Button */
        button {
            margin-top: 25px; font-weight: bold; text-transform: uppercase;
            background: linear-gradient(45deg, var(--neon-red), var(--neon-blue), var(--neon-green));
            background-size: 400%; animation: glowing 20s linear infinite; cursor: pointer; color: black;
            transition: transform 0.2s;
        }
        button:active { transform: scale(0.98); }
        @keyframes glowing { 0% { background-position: 0 0; } 50% { background-position: 400% 0; } 100% { background-position: 0 0; } }

        /* Animation Stage */
        .visual-stage {
            display: flex; flex-direction: column; align-items: center; justify-content: flex-end;
            min-height: 200px; position: relative; overflow: hidden; background: #252525;
            border-bottom: 8px solid #5d4037; border-radius: 10px; margin-bottom: 15px;
        }

        .plant-container { transition: all 1s ease; transform-origin: bottom; transform: scaleY(0); display:flex; flex-direction:column; align-items:center;}
        .stem { width: 8px; background: var(--neon-green); border-radius: 5px; transition: height 1.5s ease-out; }
        .leaf-icon { font-size: 60px; margin-bottom: -10px; z-index: 2; animation: bounce 2s infinite ease-in-out; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
        
        /* Stats Grid */
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .stat-box { background: #2a2a2a; padding: 15px; border-radius: 10px; text-align: center; }

        .speedometer-wrapper { position: relative; width: 120px; height: 60px; overflow: hidden; margin: 0 auto; }
        .speedometer-bg { width: 120px; height: 120px; background: conic-gradient(from 180deg, var(--neon-red) 0deg, yellow 90deg, var(--neon-green) 180deg, transparent 180deg); border-radius: 50%; }
        .needle { width: 60px; height: 4px; background: white; position: absolute; bottom: 0; left: 0; transform-origin: 100% 50%; transform: rotate(0deg); transition: transform 1.5s ease; }

        /* --- NEW: DYNAMIC ADVICE CARD --- */
        .advice-card {
            grid-column: span 2; 
            margin-top: 20px;
            background: #1a2520;
            border: 1px solid var(--neon-green);
            padding: 20px;
            border-radius: 10px;
            display: none; 
        }
        .advice-title { color: var(--neon-green); font-size: 1.2rem; margin-bottom: 15px; border-bottom: 1px solid #333; padding-bottom: 10px; }
        
        .tip-item { 
            background: #222; 
            margin-bottom: 12px; 
            padding: 12px; 
            border-radius: 8px; 
            border-left: 5px solid #555;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }

        .tip-icon { font-size: 1.5rem; min-width: 30px; }
        .tip-content { flex-grow: 1; }
        .tip-header { font-weight: bold; font-size: 1rem; color: #fff; margin-bottom: 3px; }
        .tip-body { color: #ccc; font-size: 0.9rem; line-height: 1.4; }

        /* Warning Levels */
        .border-red { border-left-color: var(--neon-red); }
        .border-yellow { border-left-color: var(--neon-yellow); }
        .border-green { border-left-color: var(--neon-green); }

        @media (max-width: 700px) {
            .container { grid-template-columns: 1fr; }
            .advice-card { grid-column: span 1; }
        }
    </style>
</head>
<body>

    <h1>Mekhava Siri<br><span style="font-size:0.8em">‡∞Æ‡±á‡∞ñ‡∞µ‡∞æ ‡∞∏‡∞ø‡∞∞‡∞ø (Expert Mode)</span></h1>
    <div class="subtitle">Condition-Specific Farming Advice Developed by Balavardhan</div>

    <div class="container">
        <div class="panel">
            <h3>üå± Conditions / ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å</h3>
            
            <label>Land Size (Acres) / ‡∞≠‡±Ç‡∞Æ‡∞ø (‡∞é‡∞ï‡∞∞‡∞æ‡∞≤‡±ç‡∞≤‡±ã)</label>
            <input type="number" id="acres" value="1" min="0.5" step="0.5">

            <label>Crop / ‡∞™‡∞Ç‡∞ü</label>
            <select id="crop">
                <option value="rice">Rice (Paddy) / ‡∞µ‡∞∞‡∞ø üåæ</option>
                <option value="corn">Corn / ‡∞Æ‡±ä‡∞ï‡±ç‡∞ï‡∞ú‡±ä‡∞®‡±ç‡∞® üåΩ</option>
                <option value="chili">Chili / ‡∞Æ‡∞ø‡∞∞‡∞™ üå∂Ô∏è</option>
                <option value="tomato">Tomato / ‡∞ü‡∞Æ‡∞æ‡∞ü‡∞æ üçÖ</option>
                <option value="mango">Mango / ‡∞Æ‡∞æ‡∞Æ‡∞ø‡∞°‡∞ø ü•≠</option>
            </select>

            <label>Soil Type / ‡∞®‡±á‡∞≤ ‡∞∞‡∞ï‡∞Ç</label>
            <select id="soil">
                <option value="loamy">Loamy (Red) / ‡∞é‡∞∞‡±ç‡∞∞ ‡∞®‡±á‡∞≤</option>
                <option value="clay">Clay (Black) / ‡∞¨‡∞Ç‡∞ï/‡∞®‡∞≤‡±ç‡∞≤ ‡∞∞‡±á‡∞ó‡∞°‡∞ø</option>
                <option value="sandy">Sandy / ‡∞á‡∞∏‡±Å‡∞ï ‡∞®‡±á‡∞≤</option>
            </select>

            <label>Water Level / ‡∞®‡±Ä‡∞∞‡±Å</label>
            <select id="water">
                <option value="medium">Medium / ‡∞∏‡∞∞‡∞ø‡∞™‡∞°‡∞æ</option>
                <option value="high">High / ‡∞é‡∞ï‡±ç‡∞ï‡±Å‡∞µ (Flooded)</option>
                <option value="low">Low / ‡∞§‡∞ï‡±ç‡∞ï‡±Å‡∞µ (Drought)</option>
            </select>

            <label>Season / ‡∞ï‡∞æ‡∞≤‡∞Ç</label>
            <select id="season">
                <option value="kharif">Kharif / ‡∞µ‡∞æ‡∞®‡∞æ‡∞ï‡∞æ‡∞≤‡∞Ç</option>
                <option value="rabi">Rabi / ‡∞ö‡∞≤‡∞ø‡∞ï‡∞æ‡∞≤‡∞Ç</option>
            </select>

            <button onclick="calculateFarming()">üöÄ Analyze & Get Tips</button>
        </div>

        <div class="panel">
            <h3>üìä Forecast / ‡∞´‡∞≤‡∞ø‡∞§‡∞æ‡∞≤‡±Å</h3>
            
            <div class="visual-stage">
                <div class="plant-container" id="plantObj">
                    <div class="leaf-icon" id="plantIcon">üå±</div>
                    <div class="stem" id="plantStem"></div>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-box">
                    <small>Yield Success</small>
                    <h2 id="yieldText" style="color:white;">0%</h2>
                    <div style="background:#444; height:8px; border-radius:4px;"><div id="yieldBar" style="width:0%; height:100%; background:var(--neon-green);"></div></div>
                </div>
                <div class="stat-box">
                    <small>Est. Profit</small>
                    <div class="speedometer-wrapper"><div class="speedometer-bg"></div><div class="needle" id="profitNeedle"></div></div>
                    <div style="color:var(--neon-green); font-weight:bold;" id="profitText">‚Çπ0</div>
                </div>
            </div>
        </div>

        <div class="advice-card" id="adviceCard">
            <div class="advice-title">üí° Expert Advice (Based on Conditions)</div>
            <div id="tipsContent"></div>
        </div>
    </div>

    <script>
        // --- DYNAMIC TIP DATABASE ---
        // Generates tips based on conditions, not just crop
        function getDynamicTips(crop, soil, water, season) {
            let tips = [];

            // 1. CROP + SOIL LOGIC
            if (crop === 'rice' && soil === 'sandy') {
                tips.push({ type: 'red', icon: 'üíß', title: 'Critical Water Loss', body: 'Sandy soil drains water too fast for Rice. <b>Action:</b> Apply Green Manure (Jeeluga) or Tank Silt to improve water holding.' });
            }
            if ((crop === 'chili' || crop === 'corn') && (soil === 'clay' || soil === 'black') && water === 'high') {
                tips.push({ type: 'red', icon: '‚ö†Ô∏è', title: 'Root Rot Danger', body: 'Clay soil + High water = Root Rot. <b>Action:</b> Dig drainage trenches immediately to let water out.' });
            }
            if (crop === 'tomato' && soil === 'sandy' && water === 'low') {
                tips.push({ type: 'red', icon: 'üçÇ', title: 'Blossom End Rot Risk', body: 'Low water in sandy soil causes Calcium deficiency. <b>Action:</b> Spray Calcium Chloride and water regularly.' });
            }

            // 2. CROP + SEASON LOGIC
            if (crop === 'mango' && season === 'rabi') {
                tips.push({ type: 'yellow', icon: '‚ùÑÔ∏è', title: 'Powdery Mildew Alert', body: 'Cool nights in Rabi cause fungus on mango flowers. <b>Action:</b> Spray Wettable Sulfur if you see white powder.' });
            }
            if (crop === 'rice' && season === 'rabi') {
                tips.push({ type: 'yellow', icon: 'üå°Ô∏è', title: 'Cold Sensitivity', body: 'Zinc deficiency is common in Rabi Rice. <b>Action:</b> Apply Zinc Sulfate if leaves turn yellow/brown.' });
            }

            // 3. CROP + WATER LOGIC
            if (water === 'low') {
                tips.push({ type: 'yellow', icon: 'üåµ', title: 'Drought Management', body: `Moisture is low for ${crop}. <b>Action:</b> Use Drip Irrigation and Mulching (cover soil with straw) to save 50% water.` });
            }
            if (crop === 'corn' && water === 'high') {
                tips.push({ type: 'red', icon: 'üö´', title: 'Waterlogging Alert', body: 'Corn cannot survive standing water for >2 days. Drain field immediately.' });
            }

            // 4. GENERAL BEST PRACTICES (Always added based on Crop)
            if (crop === 'chili') tips.push({ type: 'green', icon: 'üêû', title: 'Pest Trap', body: 'Intercrop with Marigold (Banthi) to trap borer insects naturally.' });
            if (crop === 'rice') tips.push({ type: 'green', icon: 'üìà', title: 'Yield Boost', body: 'Try SRI (System of Rice Intensification) method - Plant younger seedlings (8-12 days old).' });
            if (crop === 'mango') tips.push({ type: 'green', icon: '‚úÇÔ∏è', title: 'Pruning', body: 'After harvest, prune dead branches to allow sunlight for next season.' });
            if (crop === 'tomato') tips.push({ type: 'green', icon: 'ü•¢', title: 'Staking', body: 'Use bamboo sticks to keep fruits off the ground and prevent rotting.' });

            return tips;
        }

        function calculateFarming() {
            // 1. Get Inputs
            const acres = parseFloat(document.getElementById('acres').value) || 1;
            const crop = document.getElementById('crop').value;
            const soil = document.getElementById('soil').value;
            const water = document.getElementById('water').value;
            const season = document.getElementById('season').value;

            // 2. Logic Variables
            let yieldScore = 60; 
            let profitBase = 30000;
            let icon = "üå±";

            // Basic Yield Logic (Simplified)
            if (crop === 'rice') { 
                icon = "üåæ"; profitBase = 25000; 
                if(soil === 'clay') yieldScore += 20;
                if(soil === 'sandy') yieldScore -= 30;
                if(water === 'high') yieldScore += 10;
            }
            else if (crop === 'corn') { 
                icon = "üåΩ"; profitBase = 20000; 
                if(water === 'high') yieldScore -= 40; // Corn hates water
                if(soil === 'loamy') yieldScore += 15;
            }
            else if (crop === 'chili') { 
                icon = "üå∂Ô∏è"; profitBase = 45000; 
                if(water === 'high') yieldScore -= 30; // Root rot
            }
            else if (crop === 'tomato') { icon = "üçÖ"; profitBase = 35000; }
            else if (crop === 'mango') { icon = "ü•≠"; profitBase = 60000; }

            // General Modifiers
            if (water === 'low') yieldScore -= 20; 
            if (yieldScore > 100) yieldScore = 100;
            if (yieldScore < 10) yieldScore = 10;

            const totalProfit = Math.floor((profitBase * acres) * (yieldScore / 100));

            // 3. Update Stats
            document.getElementById('yieldText').innerText = yieldScore + "%";
            document.getElementById('yieldBar').style.width = yieldScore + "%";
            document.getElementById('yieldBar').style.background = yieldScore < 40 ? "#ff073a" : "#39ff14";
            
            document.getElementById('profitText').innerText = "‚Çπ" + totalProfit.toLocaleString('en-IN');
            const angle = (yieldScore / 100) * 180;
            document.getElementById('profitNeedle').style.transform = `rotate(${angle}deg)`;

            // Plant Anim
            const plantObj = document.getElementById('plantObj');
            const plantStem = document.getElementById('plantStem');
            plantObj.style.transform = "scaleY(0)";
            document.getElementById('plantIcon').innerText = icon;
            setTimeout(() => {
                plantObj.style.transform = "scaleY(1)";
                plantStem.style.height = ((yieldScore/100)*120) + "px";
            }, 100);

            // 4. --- GENERATE DYNAMIC TIPS ---
            const adviceCard = document.getElementById('adviceCard');
            const tipsContent = document.getElementById('tipsContent');
            
            // Get specific tips
            const myTips = getDynamicTips(crop, soil, water, season);

            // Build HTML
            let tipsHTML = "";
            myTips.forEach(tip => {
                let borderClass = 'border-green';
                if(tip.type === 'red') borderClass = 'border-red';
                if(tip.type === 'yellow') borderClass = 'border-yellow';

                tipsHTML += `
                    <div class="tip-item ${borderClass}">
                        <div class="tip-icon">${tip.icon}</div>
                        <div class="tip-content">
                            <div class="tip-header">${tip.title}</div>
                            <div class="tip-body">${tip.body}</div>
                        </div>
                    </div>
                `;
            });

            tipsContent.innerHTML = tipsHTML;
            adviceCard.style.display = 'block';
            
            if(window.innerWidth < 700) {
                adviceCard.scrollIntoView({behavior: "smooth"});
            }
        }
    </script>
</body>
</html>

